summary: test the 'my-rock-name' project

execute: |
  case "$(uname -m)" in
    x86_64) rid="linux-x64" ;;
    aarch64) rid="linux-arm64" ;;
    s390x) rid="linux-s390x" ;;
    ppc64le) rid="linux-ppc64le" ;;
    *) echo "Unsupported architecture: $(uname -m)" >&2; exit 1 ;;
  esac

  cd app_helloworld-self-contained/src
  docker run --rm -v $(pwd):/app ubuntu:25.04 bash -c "apt update && apt install dotnet-sdk-9.0 -y && cd /app && dotnet publish --self-contained -r $rid"

  docker run --rm -v $(pwd):/app:ro -e PEBBLE_VERBOSE=1 my-rock-name exec /app/bin/Release/net9.0/linux-x64/Hello | grep "Hello, World!"
